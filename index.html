<!DOCTYPE HTML>
<html>
<meta charset="UTF-8">
<meta name="author" content="admin@yo2.cz">
<title>Bexeso</title>
<style>
body{padding:3px;margin:0;background:#bbf;font-family:Arial;text-align:center}
#c{display:none}
#f{margin:64px auto;width:280px;text-align:left}
footer{position:fixed;right:10px;bottom:10px}
a{color:#111}
</style>
<script>
function $(j){return document.getElementById(j)}var img=new Image;img.src="img/1.png";
function Bexeso(j,b,s,v){function t(a){return Math.floor(Math.random()*a)}function z(){e.clearRect(0,-o,b*d,b*d);for(var a in h){var c=a%b*d,A=(a-a%b)/b*d;-1==h[a]?e.clearRect(c,A,d,d):w(32,c,A)}e.textAlign="center";e.font="20px Arial";e.fillText(l[1]+" : "+l[0],b*d/2,37-o)}function w(a,c,b){var g=d-2*n;e.drawImage(img,33*g,0,g,g,c+n,b+n,g,g);e.drawImage(img,a*g,0,g,g,c+n,b+n,g,g)}function x(a){var c=a%b,e=(a-a%b)/b;p++;var g;i[a]=g=h[a];w(g,c*d,e*d);if(2==p){if(g==h[m]){h[a]=h[m]=i[a]=i[m]=-1;var f=
k?15+5*l[k]-q-n:-(15+5*l[k]-q-n)+b*d-d,j=d/4*l[k];setTimeout(function(){w(g,f,j)},200);l[k]++;s==u&&(k=1*!k)}s==u&&(k=1*!k,y=1,setTimeout(B,2E3-250*v))}1==p&&(m=a)}function B(){y=p=0;m=-1;z();var a;a:{for(a in h)if(-1!=h[a]){a=!1;break a}a=!0}a?(a="remis",l[0]>l[1]&&(a="you lose"),l[0]<l[1]&&(a="you win!"),e.font="40px Arial",e.textAlign="center",e.fillText(a,b*d/2,b*d/2)):s==u&&!k&&(a=t(100)<E[v]?F:G,setTimeout(a,200),setTimeout(a,400))}function G(){do var a=t(b*b);while(-1==h[a]||a==m);x(a)}function F(){var a;
if(0==p)for(var c in i){for(var b in i)if(i[c]==i[b]&&c!=b&&0<=i[c]){a=c;break}if(void 0!=a)break}if(1==p)for(c in i)if(i[c]==h[m]&&c!=m&&0<=i[c]){a=c;break}if(void 0==a){a=[];for(c in i)-2==i[c]&&a.push(c);a=a[t(a.length)]}x(a)}function C(a){return{x:Math.floor((a.pageX-a.target.offsetLeft-q)/d),y:Math.floor((a.pageY-a.target.offsetTop-o)/d)}}function D(a,c){var d=c*b+a;return y||!k||0>a||a>=b||0>c||c>=b||d==m||-1==h[d]?0:1}var u=1,E=[0,16,32,64,100],k=1,p=0,m,y=0,l=[0,0],r=document.createElement("canvas"),
n=2,d=img.height+2*n,o=64,q=256;r.width=b*d+2*q;r.height=b*d+2*o;$(j).appendChild(r);var e=r.getContext("2d");e.translate(q,o);j=s==u?"pc *"+[""," *"," * *"," * * *"," * * * *"][v]:"";e.font="20px Arial";e.textAlign="left";e.fillText("You",15-q,37-o);e.textAlign="right";e.fillText(j,b*d+q-15,37-o);for(var j=[],h=[],i=[],f=0;32>f;f++)j[f]=f;j.sort(function(){return t(2)-0.5});for(f=0;f<b*b/2;f++)h[2*f]=h[2*f+1]=j[f];h.sort(function(){return t(2)-0.5});for(f=0;f<b*b;f++)i[f]=-2;z();r.onclick=
function(a){if(s!=u&&2==p)B();else{var c=C(a),a=c.x,c=c.y,d=c*b+a;D(a,c)&&x(d)}};r.onmousemove=function(a){a=C(a);r.style.cursor=D(a.x,a.y)?"pointer":"default"}}
window.onload=function(){$("f").onsubmit=function(){this.style.display="none";$("c").style.display="inline";new Bexeso("b",this.s.value,this.m.value,this.d.value);return!1};$("c").onclick=function(){$("b").innerHTML="";this.style.display="none";$("f").style.display="block"};$("m").onchange=function(){$("d").style.display=0==this.value?"none":"inline"}};
</script>
<body>
<form id=f>
<select id=s>
<option value=4>4×4</option>
<option value=6 selected>6×6</option>
<option value=8>8×8</option>
</select>
<select id=m>
<option value=0>training</option>
<option value=1 selected>vs. pc</option>
</select>
<select id=d>
<option value=0>peaceful</option>
<option value=1>easy</option>
<option value=2 selected>medium</option>
<option value=3>hard</option>
<option value=4>extreme</option>
</select>
<button>play!</button>
</form>
<div id=b></div>
<button id=c>storno</button>
<footer>by <a href="http://yo2.cz/me" target=_blank>YOYO</a></footer>
</html>